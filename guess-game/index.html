<!DOCTYPE html>
<html>
<base href="/">
    <meta charset="UTF-8">
    <link rel="icon" href="data:,">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="referrer" content="no-referrer">
    <title>吕阳阳猜拳小游戏</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <h1 class="game-title">猜拳游戏</h1>
    <div class="buttons">
        <button data-move="✌️">✌️</button>
        <button data-move="✊">✊</button>
        <button data-move="🖐️">🖐️</button>
    </div>
    <div id="game-result"></div>

    <!-- 音频系统 -->
    <audio id="click-sound" src="./assets/sounds/click.mp3"></audio>
    <audio id="win-sound" src="./assets/sounds/win.mp3"></audio>
    <audio id="lose-sound" src="./assets/sounds/lose.mp3"></audio>

    <script src="./script.js"></script>
    
    <!-- 微信适配代码 -->
    <script>
    document.addEventListener('WeixinJSBridgeReady', function() {
        document.body.click();
    });

    // 路径自动修正
    (function() {
        const getBasePath = () => {
            const path = window.location.href
                .replace(/index\.html.*$/, '')
                .replace(/#.*$/, '');
            return path.endsWith('/') ? path : path + '/';
        };

        const basePath = getBasePath();
        document.querySelectorAll('audio').forEach(audio => {
            const originalSrc = audio.getAttribute('src');
            audio.src = basePath + originalSrc;
        });

        if(/MicroMessenger/i.test(navigator.userAgent)) {
            const link = document.createElement('a');
            link.href = './';
            document.querySelectorAll('audio').forEach(audio => {
                audio.src = link.href + audio.getAttribute('src');
            });
        }
    })();
    </script>
</body>
</html>
